<div *ngIf="agg" class="agg-data">
  <ng-container
    [ngTemplateOutlet]="rowLabels"
    [ngTemplateOutletContext]="{ $implicit: agg.features }"
  ></ng-container>
  <div class="agg-data__checks">
    <svg [attr.height]="canvasHeight" [attr.width]="canvasWidth">
      <g
        (click)="onColumnClick(column)"
        *ngFor="let column of agg?.scores; let columnIndex = index"
        [attr.transform]="columnTranslate(columnIndex)"
        [ngClass]="{
          'column--active': true
        }"
        class="column"
      >
        <rect
          *ngFor="let name of agg.features; let rowIndex = index"
          [attr.fill]="cellColor(column.scores[name])"
          [attr.height]="CELL_SIZE.height"
          [attr.transform]="rowTranslate(rowIndex)"
          [attr.width]="CELL_SIZE.width"
          [attr.rx]="2"
        ></rect>
      </g>
    </svg>
  </div>
</div>

<ng-template #rowLabels let-names>
  <ul [ngStyle]="{ width: labelsWidth + 'px' }" class="agg-data__labels">
    <li *ngFor="let label of names" class="agg-data__label">
      {{ label }}
    </li>
  </ul>
</ng-template>
