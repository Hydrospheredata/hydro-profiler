"use strict";(self.webpackChunkprofilerFe=self.webpackChunkprofilerFe||[]).push([[360],{8360:(Mt,ut,P)=>{P.r(ut),P.d(ut,{AkitaNgRouterStoreModule:()=>O,RouterQuery:()=>j,RouterService:()=>v,RouterStore:()=>W,createInitialRouterState:()=>Y});var k=P(5487),M=P(4762),B=P(4048),z=P(1477),et=P(9765),ct=P(739),G=P(8002);function rt(...g){const S=g.length;if(0===S)throw new Error("list of properties cannot be empty.");return h=>(0,G.U)(function(g,S){return _=>{let N=_;for(let it=0;it<S;it++){const pt=null!=N?N[g[it]]:void 0;if(void 0===pt)return;N=pt}return N}}(g,S))(h)}var L=P(7519);function Y(){return{state:null,navigationId:null}}let W=(()=>{let g=class extends z.yh{constructor(){super({state:null,navigationId:null})}};return g.\u0275fac=function(h){return new(h||g)},g.\u0275prov=(0,k.\u0275\u0275defineInjectable)({factory:function(){return new g},token:g,providedIn:"root"}),g=(0,M.gn)([(0,z.yC)({name:"router"}),(0,M.w6)("design:paramtypes",[])],g),g})();function H(g){return S=>S.pipe((0,G.U)(h=>h.state)).pipe((0,z.Jt)(),(0,G.U)(h=>h[g]))}let j=(()=>{class g extends z.AE{constructor(h){super(h),this.store=h,this.__navigationCancel=new et.xQ,this.__navigationError=new et.xQ}selectParams(h){if(void 0===h)return this.select().pipe(H("params"),(0,L.x)());const _=N=>this.select().pipe(H("params"),rt(N),(0,L.x)());if(Array.isArray(h)){const N=h.map(_);return(0,ct.aj)(N)}return _(h).pipe((0,L.x)())}getParams(h){if(this.getValue().state){const _=this.getValue().state.params;return void 0===h?_:_[h]}return null}selectQueryParams(h){if(void 0===h)return this.select().pipe(H("queryParams"),(0,L.x)());const _=N=>this.select().pipe(H("queryParams"),rt(N),(0,L.x)());if(Array.isArray(h)){const N=h.map(_);return(0,ct.aj)(N)}return _(h)}getQueryParams(h){if(this.getValue().state){const _=this.getValue().state.queryParams;return void 0===h?_:_[h]}return null}selectFragment(){return this.select().pipe(H("fragment"),(0,L.x)())}getFragment(){return this.getValue().state?this.getValue().state.fragment:null}selectData(h){return void 0===h?this.select().pipe(H("data"),(0,L.x)()):this.select().pipe(H("data"),rt(h),(0,L.x)())}getData(h){if(this.getValue().state){const _=this.getValue().state.data;return void 0===h?_:_[h]}return null}selectNavigationExtras(h){return void 0===h?this.select().pipe(H("navigationExtras"),(0,L.x)()):this.select().pipe(H("data"),rt(h),(0,L.x)())}getNavigationExtras(h){if(this.getValue().state){const _=this.getValue().state.navigationExtras;return void 0===h?_:_[h]}return null}selectNavigationCancel(){return this.__navigationCancel.asObservable()}selectNavigationError(){return this.__navigationError.asObservable()}}return g.\u0275fac=function(h){return new(h||g)(k.\u0275\u0275inject(W))},g.\u0275prov=(0,k.\u0275\u0275defineInjectable)({factory:function(){return new g((0,k.\u0275\u0275inject)(W))},token:g,providedIn:"root"}),g})(),v=(()=>{class g{constructor(h,_,N){this.routerStore=h,this.routerQuery=_,this.router=N,this.dispatchTriggeredByRouter=!1,this.navigationTriggeredByDispatch=!1}dispatchRouterCancel(h){this.update({navigationId:h.id}),this.routerQuery.__navigationCancel.next(h)}dispatchRouterError(h){this.update({navigationId:h.id}),this.routerQuery.__navigationError.next(h)}dispatchRouterSuccess(){this.update(this.lastRouterState)}init(){this.setUpStoreListener(),this.setUpStateRollbackEvents()}update(h){this.dispatchTriggeredByRouter=!0,this.routerStore.update(_=>Object.assign(Object.assign({},_),h)),this.dispatchTriggeredByRouter=!1,this.navigationTriggeredByDispatch=!1}setUpStoreListener(){this.routerQuery.select(h=>h).subscribe(h=>{this.lastRouterState=h,this.navigateIfNeeded()})}navigateIfNeeded(){!this.lastRouterState||!this.lastRouterState.state||this.dispatchTriggeredByRouter||this.router.url!==this.lastRouterState.state.url&&(this.navigationTriggeredByDispatch=!0,(0,z.x4)(),this.router.navigateByUrl(this.lastRouterState.state.url))}setUpStateRollbackEvents(){this.router.events.subscribe(h=>{h instanceof B.RoutesRecognized||h instanceof B.GuardsCheckEnd||h instanceof B.ResolveEnd?this.lastRouterState=this.serializeRoute(h):h instanceof B.NavigationCancel?this.dispatchRouterCancel(h):h instanceof B.NavigationError?this.dispatchRouterError(h):h instanceof B.NavigationEnd&&!this.navigationTriggeredByDispatch&&this.dispatchRouterSuccess()})}serializeRoute(h){let _=h.state.root;for(;_.firstChild;)_=_.firstChild;const{params:N,data:it,queryParams:pt,fragment:Nt}=_;return{navigationId:h.id,state:{url:h.url,urlAfterRedirects:h.urlAfterRedirects,params:N,queryParams:pt,fragment:Nt,data:it,navigationExtras:this.router.getCurrentNavigation().extras?this.router.getCurrentNavigation().extras.state:{}}}}}return g.\u0275fac=function(h){return new(h||g)(k.\u0275\u0275inject(W),k.\u0275\u0275inject(j),k.\u0275\u0275inject(B.Router))},g.\u0275prov=(0,k.\u0275\u0275defineInjectable)({factory:function(){return new g((0,k.\u0275\u0275inject)(W),(0,k.\u0275\u0275inject)(j),(0,k.\u0275\u0275inject)(B.Router))},token:g,providedIn:"root"}),(0,M.gn)([(0,z.aD)("Navigation Cancelled"),(0,M.w6)("design:type",Function),(0,M.w6)("design:paramtypes",[B.NavigationCancel]),(0,M.w6)("design:returntype",void 0)],g.prototype,"dispatchRouterCancel",null),(0,M.gn)([(0,z.aD)("Navigation Error"),(0,M.w6)("design:type",Function),(0,M.w6)("design:paramtypes",[B.NavigationError]),(0,M.w6)("design:returntype",void 0)],g.prototype,"dispatchRouterError",null),(0,M.gn)([(0,z.aD)("Navigation Succeeded"),(0,M.w6)("design:type",Function),(0,M.w6)("design:paramtypes",[]),(0,M.w6)("design:returntype",void 0)],g.prototype,"dispatchRouterSuccess",null),g})(),O=(()=>{class g{constructor(h){this.routerService=h,this.routerService.init()}}return g.\u0275fac=function(h){return new(h||g)(k.\u0275\u0275inject(v))},g.\u0275mod=k.\u0275\u0275defineNgModule({type:g}),g.\u0275inj=k.\u0275\u0275defineInjector({}),g})();O.ctorParameters=()=>[{type:v}]},1477:(Mt,ut,P)=>{P.d(ut,{AE:()=>ae,yh:()=>ne,yC:()=>Ce,aD:()=>g,Jt:()=>re,x4:()=>O});var k=P(8002),M=P(7519),B=P(5435),z=P(5257),et=P(9765),ct=P(2836),G=P(6215),rt=P(5917),ht=P(5487);const Y={type:null,entityIds:null,skip:!1,payload:null};let W=!1;function v(i,t,e){!1===W&&(Y.type=i,Y.entityIds=t,Y.payload=e)}function O(i=!0){Y.skip=i}function g(i,t){return function(e,s,n){const r=n.value;return n.value=function(...a){return function(i,t,e){v(i,t,e),W=!0}(i,t),r.apply(this,a)},n}}function o(i){return"function"==typeof i}let It={resettable:!1,ttl:null,producerFn:void 0};function Vt(){return It}const Bt=new et.xQ,Ct=new ct.t(50,5e3),qt=new et.xQ,xt="undefined"!=typeof window,V={},Gt={};xt&&(window.$$stores=V,window.$$queries=Gt);function ee(i){Object.freeze(i);const t="function"==typeof i,e=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(i).forEach(function(s){e.call(i,s)&&(!t||"caller"!==s&&"callee"!==s&&"arguments"!==s)&&null!==i[s]&&("object"==typeof i[s]||"function"==typeof i[s])&&!Object.isFrozen(i[s])&&ee(i[s])}),i}Error;const At="akitaConfig";function Ce(i){return function(t){t[At]={idKey:"id"};for(let e=0,s=Object.keys(i);e<s.length;e++){const n=s[e];"name"===n?t[At].storeName=i[n]:t[At][n]=i[n]}}}new et.xQ,new G.X(!1);const ft={activeTransactions:0,batchTransaction:null};let ne=(()=>{class i{constructor(e,s={}){this.options=s,this.inTransaction=!1,this.cache={active:new G.X(!1),ttl:null},this.onInit(e)}setLoading(e=!1){e!==this._value().loading&&(v("Set Loading"),this._setState(s=>Object.assign(Object.assign({},s),{loading:e})))}setHasCache(e,s={restartTTL:!1}){if(e!==this.cache.active.value&&this.cache.active.next(e),s.restartTTL){const n=this.getCacheTTL();n&&(null!==this.cache.ttl&&clearTimeout(this.cache.ttl),this.cache.ttl=setTimeout(()=>this.setHasCache(!1),n))}}getValue(){return this.storeValue}setError(e){e!==this._value().error&&(v("Set Error"),this._setState(s=>Object.assign(Object.assign({},s),{error:e})))}_select(e){return this.store.asObservable().pipe((0,k.U)(s=>e(s.state)),(0,M.x)())}_value(){return this.storeValue}_cache(){return this.cache.active}get config(){return this.constructor[At]||{}}get storeName(){return this.config.storeName||this.options.storeName||this.options.name}get deepFreeze(){return this.config.deepFreezeFn||this.options.deepFreezeFn||ee}get cacheConfig(){return this.config.cache||this.options.cache}get _producerFn(){return this.config.producerFn||this.options.producerFn||It.producerFn}get resettable(){return function(i){return!1===function(i){return null==i}(i)}(this.config.resettable)?this.config.resettable:this.options.resettable}_setState(e,s=!0){if(o(e)){const n=e(this._value());this.storeValue=this.deepFreeze(n)}else this.storeValue=e;if(!this.store)return this.store=new G.X({state:this.storeValue}),void this.store.subscribe(({action:n})=>{n&&function(i,t){qt.next({storeName:i,action:t})}(this.storeName,n)});ft.activeTransactions>0?this.handleTransaction():this.dispatch(this.storeValue,s)}reset(){this.isResettable()?(v("Reset"),this._setState(()=>Object.assign({},this._initialState)),this.setHasCache(!1)):console.warn("You need to enable the reset functionality")}update(e){let s;v("Update");const n=this._value();s=o(e)?o(this._producerFn)?this._producerFn(n,e):e(n):e;const r=this.akitaPreUpdate(n,Object.assign(Object.assign({},n),s)),a=function(i){return function(i){return null!=i&&"false"!=`${i}`}(i)&&"Object"===i.constructor.name}(n)?r:new n.constructor(r);this._setState(a)}updateStoreConfig(e){this.options=Object.assign(Object.assign({},this.options),e)}akitaPreUpdate(e,s){return s}ngOnDestroy(){this.destroy()}destroy(){(!xt||!window.hmrEnabled)&&this===V[this.storeName]&&(delete V[this.storeName],function(i){Bt.next(i)}(this.storeName),this.setHasCache(!1),this.cache.active.complete(),this.store.complete())}onInit(e){V[this.storeName]=this,this._setState(()=>e),function(i){Ct.next(i)}(this.storeName),this.isResettable()&&(this._initialState=e),function(i,t){i||console.error(`@StoreConfig({ name }) is missing in ${t}`)}(this.storeName,this.constructor.name)}dispatch(e,s=!0){let n;s&&(n=Y,W=!1),this.store.next({state:e,action:n})}watchTransaction(){(ft.batchTransaction?ft.batchTransaction.asObservable():(0,rt.of)(!0)).subscribe(()=>{this.inTransaction=!1,this.dispatch(this._value())})}isResettable(){return!1!==this.resettable&&(this.resettable||Vt().resettable)}handleTransaction(){this.inTransaction||(this.watchTransaction(),this.inTransaction=!0)}getCacheTTL(){return this.cacheConfig&&this.cacheConfig.ttl||Vt().ttl}}return i.\u0275fac=function(e){ht.\u0275\u0275invalidFactory()},i.\u0275dir=ht.\u0275\u0275defineDirective({type:i}),i})();function re(){return(0,B.h)(i=>null!=i)}function Tt(i){return"string"==typeof i}class ae{constructor(t){this.store=t,this.__store__=t,Gt[t.storeName]=this}select(t){let e;if(o(t))e=t;else if(Tt(t))e=s=>s[t];else{if(Array.isArray(t))return this.store._select(s=>s).pipe((0,M.x)((i=t,function(t,e){const s=o(i[0]);return!1===i.some(n=>s?n(t)!==n(e):t[n]!==e[n])})),(0,k.U)(s=>o(t[0])?t.map(n=>n(s)):t.reduce((n,r)=>(n[r]=s[r],n),{})));e=s=>s}var i;return this.store._select(e)}selectLoading(){return this.select(t=>t.loading)}selectError(){return this.select(t=>t.error)}getValue(){return this.store._value()}selectHasCache(){return this.store._cache().asObservable()}getHasCache(){return this.store._cache().value}get config(){return this.constructor.akitaQueryConfig}}let ce=!1;function le(i){ce=i}new ct.t(1),new class{getStoresSnapshot(t=[]){let e={};const n=t.length>0?t:Object.keys(V);for(let r=0;r<n.length;r++){let a=n[r];"router"!==a&&(e[a]=V[a]._value())}return e}setStoresSnapshot(t,e){const s=Object.assign({skipStorageUpdate:!1,lazy:!1},e);s.skipStorageUpdate&&le(!0);let n=t;Tt(t)&&(n=JSON.parse(n));const r=Object.keys(n).length;if(s.lazy)Ct.pipe((0,B.h)(a=>n.hasOwnProperty(a)),(0,z.q)(r)).subscribe(a=>V[a]._setState(()=>n[a]));else for(let a=0,f=Object.keys(n);a<f.length;a++){const b=f[a];V[b]&&V[b]._setState(()=>n[b])}s.skipStorageUpdate&&le(!1)}}},739:(Mt,ut,P)=>{P.d(ut,{aj:()=>Y});var k=P(4869),M=P(9796),B=P(7393);class z extends B.L{notifyNext(v,O,g,S,h){this.destination.next(O)}notifyError(v,O){this.destination.error(v)}notifyComplete(v){this.destination.complete()}}class et extends B.L{constructor(v,O,g){super(),this.parent=v,this.outerValue=O,this.outerIndex=g,this.index=0}_next(v){this.parent.notifyNext(this.outerValue,v,this.outerIndex,this.index++,this)}_error(v){this.parent.notifyError(v,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ct=P(7444),G=P(7574);function rt(j,v,O,g,S=new et(j,O,g)){if(!S.closed)return v instanceof G.y?v.subscribe(S):(0,ct.s)(v)(S)}var ht=P(6693);const L={};function Y(...j){let v,O;return(0,k.K)(j[j.length-1])&&(O=j.pop()),"function"==typeof j[j.length-1]&&(v=j.pop()),1===j.length&&(0,M.k)(j[0])&&(j=j[0]),(0,ht.n)(j,O).lift(new W(v))}class W{constructor(v){this.resultSelector=v}call(v,O){return O.subscribe(new H(v,this.resultSelector))}}class H extends z{constructor(v,O){super(v),this.resultSelector=O,this.active=0,this.values=[],this.observables=[]}_next(v){this.values.push(L),this.observables.push(v)}_complete(){const v=this.observables,O=v.length;if(0===O)this.destination.complete();else{this.active=O,this.toRespond=O;for(let g=0;g<O;g++)this.add(rt(this,v[g],void 0,g))}}notifyComplete(v){0==(this.active-=1)&&this.destination.complete()}notifyNext(v,O,g){const S=this.values,_=this.toRespond?S[g]===L?--this.toRespond:this.toRespond:0;S[g]=O,0===_&&(this.resultSelector?this._tryResultSelector(S):this.destination.next(S.slice()))}_tryResultSelector(v){let O;try{O=this.resultSelector.apply(this,v)}catch(g){return void this.destination.error(g)}this.destination.next(O)}}},4762:(Mt,ut,P)=>{function et(u,c,l,o){var m,p=arguments.length,d=p<3?c:null===o?o=Object.getOwnPropertyDescriptor(c,l):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(u,c,l,o);else for(var w=u.length-1;w>=0;w--)(m=u[w])&&(d=(p<3?m(d):p>3?m(c,l,d):m(c,l))||d);return p>3&&d&&Object.defineProperty(c,l,d),d}function G(u,c){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(u,c)}P.d(ut,{gn:()=>et,w6:()=>G})}}]);